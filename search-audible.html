<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audible.co.jp 在庫検索ツール</title>
    <style>
        body { font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; margin: 20px; line-height: 1.6; background-color: #f9f9f9; color: #333; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        h2 { color: #f19100; border-bottom: 2px solid #f19100; padding-bottom: 10px; margin-top: 0; }
        p { font-size: 0.9em; color: #666; }
        textarea { width: 100%; height: 180px; margin-bottom: 15px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 16px; resize: vertical; }
        textarea:focus { border-color: #f19100; outline: none; box-shadow: 0 0 5px rgba(241,145,0,0.3); }
        button { background-color: #f19100; border: none; padding: 12px 20px; color: white; font-weight: bold; cursor: pointer; border-radius: 6px; width: 100%; font-size: 1.1em; transition: background 0.2s; }
        button:hover { background-color: #d88200; }
        .results-header { margin-top: 25px; font-weight: bold; color: #444; }
        .result-item { margin-top: 10px; padding: 15px; background: #fff; border: 1px solid #eee; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; transition: transform 0.1s; }
        .result-item:hover { border-color: #f19100; background-color: #fffdf9; }
        .book-title { font-weight: bold; flex-grow: 1; margin-right: 15px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .link-btn { text-decoration: none; background: #000; color: white; padding: 8px 16px; border-radius: 20px; font-size: 0.85em; white-space: nowrap; }
        .link-btn:hover { background: #333; }
    </style>
</head>
<body>

<div class="container">
    <h2>Audible.co.jp 在庫検索</h2>
    <p>本のタイトルや著者名を1行ずつ入力して「検索」を押してください。</p>
    <textarea id="bookList" placeholder="例：&#10;プロジェクト・ヘイル・メアリ&#10;池上彰&#10;13歳からの地政学"></textarea>
    <button onclick="generateLinks()">検索リンクを一括生成</button>

    <div id="resultsCount" class="results-header"></div>
    <div id="results"></div>
</div>

<script>
    function generateLinks() {
        const text = document.getElementById('bookList').value;
        const lines = text.split(/\r\n|\r|\n/).map(line => line.trim()).filter(line => line !== "");
        const resultsDiv = document.getElementById('results');
        const countDiv = document.getElementById('resultsCount');
        
        resultsDiv.innerHTML = "";
        
        if (lines.length === 0) {
            countDiv.innerHTML = "タイトルを入力してください。";
            return;
        }

        countDiv.innerHTML = `生成されたリンク (${lines.length}件):`;

        lines.forEach(title => {
            const encodedTitle = encodeURIComponent(title);
            // audible.co.jp の検索パラメータ（keywords）を使用
            const url = `https://www.audible.co.jp/search?keywords=${encodedTitle}`;

            const itemDiv = document.createElement('div');
            itemDiv.className = 'result-item';
            itemDiv.innerHTML = `
                <span class="book-title">${escapeHtml(title)}</span>
                <a href="${url}" target="_blank" class="link-btn">Audibleで検索</a>
            `;
            resultsDiv.appendChild(itemDiv);
        });
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }
</script>

</body>
</html>
